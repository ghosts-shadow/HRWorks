@using Microsoft.Ajax.Utilities
@model IEnumerable<HRworks.Models.Att_adj>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<style>
    /* Action cell layout: neat row with wrapping */
    .action-cell .actions {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 8px; /* space between items */
    }

        .action-cell .actions form {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0; /* avoid extra spacing from forms */
        }

    .action-cell .comment-input {
        width: 220px; /* adjust as needed */
        max-width: 100%;
    }
    /* On narrow screens, allow the input to wrap to a new line */
    @@media (max-width: 768px) {
        .action-cell .comment-input {
            flex: 1 1 100%;
        }
    }
</style>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.master_file.employee_no)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.master_file.employee_name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.which_date)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.late_in)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.early_out)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.reason)
        </th>
        <th>
            @Html.DisplayName("status")
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.master_file.employee_no)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.master_file.employee_name)
            </td>
            <td>
                @{
                    var datet = item.which_date;
                    @datet.ToString("D")
                }
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.late_in)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.early_out)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.reason)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.status)
            </td>
            <td class="action-cell">
                <div class="actions">
                    <a class="btn btn-success btn-sm"
                       href="@Url.Action("approve", "Att_adj", new { id = item.Id ,actionvalue =""})">
                        Approve
                    </a>
                    @using (Html.BeginForm("reject", "Att_adj", new { id = item.Id }, FormMethod.Post, new { @class = "reject-form" }))
                    {
                        @Html.AntiForgeryToken()
                        <input type="text"
                               name="message"
                               required
                               class="form-control input-sm comment-input"
                               placeholder="comment" />
                        <button type="submit" class="btn btn-danger btn-sm">Reject</button>
                    }
                </div>
            </td>
        </tr>
    }

</table>
