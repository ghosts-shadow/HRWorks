@model IEnumerable<HRworks.Models.employeeleavesubmition>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<h3><b>employee name:- @ViewBag.name <br /> employee no:- @ViewBag.no</b></h3>
<h3><b>
    <div class="row">
        <div class="col-md-10">period   :- @ViewBag.per</div>
    </div>
    <div class="row">
        <div class="col-md-10">unpaid   :- @ViewBag.ump</div>
    </div>
    <div class="row">
        <div class="col-md-10">net period  :- @ViewBag.netp</div>
    </div>
    <div class="row">
        <div class="col-md-10">accrued  :- @ViewBag.accr</div>
    </div>
    <div class="row">
        <div class="col-md-10">annual leave taken  :- @ViewBag.aval</div>
    </div>
    <div class="row">
        <div class="col-md-10"> Annual Leave Applied  :- @ViewBag.faval</div>
    </div>
    <div class="row">
        <div class="col-md-10">Annual Leave total  :- @ViewBag.taval</div>
    </div>
    <div class="row">
        <div class="col-md-10">leave balance  :- @ViewBag.lbal</div>
    </div>
    <div class="row">
        <div class="col-md-10">forfited balance  :- @ViewBag.forfited</div>
    </div>
    <div class="row">
        <div class="col-md-10">sick   :- @ViewBag.sick</div>
    </div>
    <div class="row">
        <div class="col-md-10">compassionate   :- @ViewBag.comp</div>
    </div>
    <div class="row">
        <div class="col-md-10">maternity  :- @ViewBag.mate</div>
    </div>
    <div class="row">
        <div class="col-md-10">haj  :- @ViewBag.haj</div>
    </div>
    <div class="row">
        <div class="col-md-10">UDDAH  :- @ViewBag.udd</div>
    </div>
    <div class="row">
        <div class="col-md-10">escort  :- @ViewBag.esco</div>
    </div>
    <div class="row">
        <div class="col-md-10">paternity  :- @ViewBag.pater</div>
    </div></b>
</h3>
    <br />
    <hr />
    <table class="table">

        <tr>
            <th>
                SN#
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Date)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Start_leave)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.End_leave)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.leave_type)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.toltal_requested_days)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.half)
            </th>
            <th>Status</th>
        </tr>
        @{
            int i = 0;
        }
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @{
                        i++;
                    }
                    @i
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Date)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Start_leave)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.End_leave)
                </td>
                <td>
                    @if (item.leave_type == "1")
                    {
                        <i>Annual</i>
                    }
                    @if (item.leave_type == "2")
                    {
                        <i>Sick(non industrial)</i>
                    }
                    @if (item.leave_type == "3")
                    {
                        <i>Compassionate</i>
                    }
                    @if (item.leave_type == "4")
                    {
                        <i>Maternity </i>
                    }
                    @if (item.leave_type == "5")
                    {
                        <i>Haj</i>
                    }
                    @if (item.leave_type == "6")
                    {
                        <i>Unpaid </i>
                    }
                    @if (item.leave_type == "7")
                    {
                        <i> Sick(industrial)</i>
                    }
                    @if (item.leave_type == "8")
                    {
                        <i>UDDAH</i>
                    }
                    @if (item.leave_type == "9")
                    {
                        <i>ESCORT</i>
                    }
                    @if (item.leave_type == "10")
                    {
                        <i>PATERNITY</i>
                    }
                </td>
                <td>
                    @*
                        helped by ahemed yousaf
                    *@
                    @if (item.half == true)
                    {
                        var a = item.Start_leave;
                        var b = item.End_leave;
                        double days = 0;
                        if (a == b)
                        {
                            days = 1;
                        }
                        else
                        {
                            var ab = b - a;
                            if (ab.HasValue)
                            {
                                days = ab.Value.TotalDays;
                                days = System.Math.Abs(days);
                                days += 1;
                            }
                        }
                        days -= 0.5;
                        @days.ToString()
                    }
                    else
                    {
                        {
                            var a = item.Start_leave;
                            var b = item.End_leave;
                            double days = 0;
                            if (a == b)
                            {
                                days = 1;
                            }
                            else
                            {
                                var ab = b - a;
                                if (ab.HasValue)
                                {
                                    days = ab.Value.TotalDays;
                                    days = System.Math.Abs(days);
                                    days += 1;
                                }
                            }
                            @days.ToString()
                        }
                    }

                </td>

                <td>
                    @{

                        if (item.half)
                        {
                            <p>YES</p>
                        }
                        else
                        {
                            <p>no</p>
                        }

                    }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.apstatus)
                </td>
            </tr>
        }

    </table>
